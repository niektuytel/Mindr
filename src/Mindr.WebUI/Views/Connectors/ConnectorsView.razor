@namespace Mindr.WebUI.Views.Connectors
@using Microsoft.AspNetCore.Authorization;
@using Mindr.Core.Models.Connector;
@using System.Collections.ObjectModel;
@using Mindr.WebUI.Models;
@using Mindr.WebUI.Services.ApiClients;
@using Mindr.WebUI.Views.Connectors.Components
@using Newtonsoft.Json;

@inherits FluentComponentBase
@attribute [Authorize]


<Breadcrumb />
<Stack Orientation="Orientation.Horizontal" Class="editable-stack">
    <FluentButton Disabled="false" Appearance="Appearance.Stealth" Style="border-radius: 0;" @onclick="HandleDialogOpen">
        <FluentIcon Slot="start" Name="@FluentIcons.Add" Size="@IconSize.Size16" Variant="@IconVariant.Regular" Color="@Color.Accent" />
        Add
    </FluentButton>
</Stack>
<Stack Orientation="Orientation.Horizontal" HorizontalGap="0" Style="height:100%">
    @if (!IsLoadingData)
    {
        <FluentDataGrid TGridItem="Connector"
                    RowsDataProvider="@DataProvider"
                    OnCellFocus="HandleCellFocus">
            <PropertyColumn Property="@(p => p.Name)" />
            <PropertyColumn Property="@(p => p.Color)" />
            <PropertyColumn Property="@(p => p.Description)" />
        </FluentDataGrid>
    }
    else
    {
        <Stack HorizontalAlignment="StackHorizontalAlignment.Center" VerticalAlignment="StackVerticalAlignment.Center">
            <FluentProgressRing />
        </Stack>
    }
</Stack>
<ConnectorDialog @ref="Dialog"/>
