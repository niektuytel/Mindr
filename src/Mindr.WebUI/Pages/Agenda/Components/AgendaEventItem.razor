@using Mindr.WebUI.Pages.Agenda.Components;
@inherits FluentComponentBase


<div style=@("width: -webkit-fill-available;border-radius: 5px;box-shadow: 0px 0px 5px 2px #0000001f;margin: 10px;" + "border-color:" + Data.Color)>
    <div>@Data.StartDate.DateTime.ToShortTimeString() - @Data.EndDate.DateTime.ToShortTimeString()</div>
    @Data.Subject
    <div>
        @if (IsLoading)
        {
            <FluentProgressRing style="width: 24px; height: 24px;"></FluentProgressRing>
        }
        else if (Connectors?.Any() == true)
        {
            foreach (var connector in Connectors)
            {
                <Stack Orientation="Orientation.Horizontal" HorizontalGap="0" Style="@($"display: -webkit-inline-box;cursor:pointer;border-radius:5px;border: solid 1px {connector.ConnectorColor};margin: 2px;padding:2px;width: fit-content;")">
                    <div @onclick="@(() => _connectorEventDialog.HandleOnEdit(Data, connector))">
                        @connector.ConnectorName
                    </div>
                </Stack>
            }
        }
        <Stack Orientation="Orientation.Horizontal" HorizontalGap="0" Style="@($"display: -webkit-inline-box;cursor:pointer;border-radius:5px;border: solid 1px black;margin: 2px;padding:2px;width: fit-content;")" @onclick="@(() => _connectorEventDialog.HandleOnCreate(Data))">
            Add connector
            <FluentIcon Slot="start" Name="@FluentIcons.Add" Size="@IconSize.Size16" Variant="@IconVariant.Regular" Color="@Color.Accent" Style="align-self: center;" />
        </Stack>
    </div>
</div>
<ConnectorEventDialog @ref="@_connectorEventDialog" OnUpdate="OnUpdate" OnCreate="OnCreate" OnDelete="OnDelete" />

