@using Microsoft.Fast.Components.FluentUI
@using Mindr.WebAssembly.Client.Models;
@using Mindr.Domain.HttpRunner.Models;
@namespace Mindr.WebAssembly.Client.Pages.Connectors.Pipeline

<FluentTreeView>
    @if(Data != null)
    {
        <FluentTreeItem Expanded="false">
            <FluentIcon Name="@FluentIcons.Collections" Slot="start" Size="@IconSize.Size20" Color=Color.Neutral />
            @Data.Info.Name
            @foreach(var folder in Data.Items)
            {
                <CollectionItem Data="@folder" OnAddHandle="@((item) => OnAddHandle(item, Data.Variable))" />
            }
        </FluentTreeItem>
    }
</FluentTreeView>

@code {
    [Parameter, EditorRequired]
    public HttpCollection? Data { get; set; } = null;

    [Parameter, EditorRequired]
    public Action<HttpItem, IEnumerable<HttpVariable>> OnAddHandle { get; set; } = default!;
}
